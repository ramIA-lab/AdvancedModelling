<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dante Conti, Sergi Ramirez, (c) IDEAI">
<meta name="dcterms.date" content="2025-04-17">

<title>Anàlisis factorial per a Dades mixtes (FAMD) – PMAAD</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../imagenes/ideai_logo.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-29e2c20b02301cfff04dc8050bf30c7e.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark-43df0d6f53b733b42d37fa7808e17715.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-83f5ffed4bb819e1a410337fb71ccdff.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark-1851c9bb8f3f4849af8ba858f06152b9.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">PMAAD</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Grau en Intel·ligència Artificial</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<p><img src="../../..\imagenes/Logo_UPC.svg.png" class="img-fluid"></p>
</div></div>
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introducción" id="toc-introducción" class="nav-link active" data-scroll-target="#introducción"><span class="header-section-number">1</span> Introducción</a></li>
  <li><a href="#planteamiento-del-problema" id="toc-planteamiento-del-problema" class="nav-link" data-scroll-target="#planteamiento-del-problema"><span class="header-section-number">2</span> Planteamiento del problema</a>
  <ul class="collapse">
  <li><a href="#entrenamiento" id="toc-entrenamiento" class="nav-link" data-scroll-target="#entrenamiento"><span class="header-section-number">2.1</span> Entrenamiento</a></li>
  <li><a href="#visualización-e-interpretación" id="toc-visualización-e-interpretación" class="nav-link" data-scroll-target="#visualización-e-interpretación"><span class="header-section-number">2.2</span> Visualización e interpretación</a></li>
  <li><a href="#eigenvalues-y-eigenvectors" id="toc-eigenvalues-y-eigenvectors" class="nav-link" data-scroll-target="#eigenvalues-y-eigenvectors"><span class="header-section-number">2.3</span> Eigenvalues y Eigenvectors</a></li>
  <li><a href="#variables" id="toc-variables" class="nav-link" data-scroll-target="#variables"><span class="header-section-number">2.4</span> Variables</a>
  <ul class="collapse">
  <li><a href="#todas-las-variables" id="toc-todas-las-variables" class="nav-link" data-scroll-target="#todas-las-variables"><span class="header-section-number">2.4.1</span> Todas las variables</a></li>
  <li><a href="#variables-cuantitativas" id="toc-variables-cuantitativas" class="nav-link" data-scroll-target="#variables-cuantitativas"><span class="header-section-number">2.4.2</span> Variables cuantitativas</a></li>
  <li><a href="#variables-cualitativas" id="toc-variables-cualitativas" class="nav-link" data-scroll-target="#variables-cualitativas"><span class="header-section-number">2.4.3</span> Variables cualitativas</a></li>
  </ul></li>
  <li><a href="#individuos" id="toc-individuos" class="nav-link" data-scroll-target="#individuos"><span class="header-section-number">2.5</span> Individuos</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Anàlisis factorial per a Dades mixtes (FAMD)</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dante Conti, Sergi Ramirez, (c) IDEAI </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 17, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">April 17, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="introducción" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introducción</h1>
<p>El Análisis Factorial de Datos Mixtos (FAMD) es una potente técnica estadística que se utiliza para analizar conjuntos de datos que contienen variables numéricas y categóricas. Amplía el análisis factorial tradicional para gestionar tipos de datos mixtos, proporcionando una comprensión integral de la estructura subyacente de conjuntos de datos complejos.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    cat?(¿BBDD Categorica?) --&gt; |"✅"| num_too?(¿Contiene numéricas?)
    num_too? --&gt; |"✅"| FAMD
    num_too? --&gt; |"❌"| multiple_cat?(¿Más de dos columnas?)
    multiple_cat? --&gt; |"✅"| MCA
    multiple_cat? --&gt; |"❌"| CA
    cat? --&gt; |"❌"| groups?(¿Columnas agrupadas?)
    groups? --&gt; |"✅"| MFA
    groups? --&gt; |"❌"| shapes?(Analysing shapes?)
    shapes? --&gt; |"✅"| GPA
    shapes? --&gt; |"❌"| PCA
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>Para poder realizar los métodos, necesitaremos importar las siguientes librerias:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Import libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FactoMineR)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> prince</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> light_famd <span class="im">import</span> FAMD</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="planteamiento-del-problema" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Planteamiento del problema</h1>
<p>Descripció de la columna:</p>
<ul>
<li><p><strong>Gender:</strong> El gènere del client: Home (1), Femení (0).</p></li>
<li><p><strong>SeniorCitizen:</strong> Indica si el client té 65 anys o més: No (0), Sí (1).</p></li>
<li><p><strong>Partner:</strong> El contracte de servei és revenut pel soci: No (0), Sí (1).</p></li>
<li><p><strong>Dependents:</strong> Indica si el client viu amb algun dependent: No (0), Sí (1).</p></li>
<li><p><strong>Tenure:</strong> Indica l’import total de mesos que el client ha estat amb l’empresa.</p></li>
<li><p><strong>PhoneService:</strong> Indica si el client es subscriu al servei de telèfon de casa amb l’empresa: No (0), Sí (1).</p></li>
<li><p><strong>MultipleLines:</strong> Indica si el client es subscriu a diverses línies telefòniques amb l’empresa: No (0), Sí (1).</p></li>
<li><p><strong>InternetService:</strong> Indica si el client es subscriu al servei d’Internet amb l’empresa: No (0), DSL (1), Fibra òptica (2).</p></li>
<li><p><strong>OnlineSecurity:</strong> Indica si el client es subscriu a un servei addicional de seguretat en línia prestat per l’empresa: No (0), Sí (1), NA (2).</p></li>
<li><p><strong>OnlineBackup:</strong> Indica si el client es subscriu a un servei de backup online addicional proporcionat per l’empresa: No (0), Sí (1), NA (2).</p></li>
<li><p><strong>DeviceProtection:</strong> Indica si el client es subscriu a un pla addicional de protecció de dispositius per als seus equips d’Internet proporcionats per l’empresa: No (0), Sí (1), NA (2).</p></li>
<li><p><strong>TechSupport:</strong> Indica si el client es subscriu a un pla de suport tècnic addicional de l’empresa amb temps d’espera reduïts: No (0), Sí (1), NA (2).</p></li>
<li><p><strong>StreamingTV:</strong> Indica si el client utilitza el seu servei d’Internet per transmetre la programació de televisió d’un proveïdor de tercers: No (0), Sí (1), NA (2). L’empresa no cobra cap càrrec addicional per aquest servei.</p></li>
<li><p><strong>StreamingMovies:</strong> Indica si el client utilitza el seu servei d’Internet per transmetre pel·lícules d’un proveïdor de tercers: No (0), Sí (1), NA (2). L’empresa no cobra cap càrrec addicional per aquest servei.</p></li>
<li><p><strong>Contract:</strong> Indica el tipus de contracte actual del client: Mes a mes (0), Un any (1), Dos anys (2).</p></li>
<li><p><strong>PaperlessBilling:</strong> Indica si el client ha triat facturació sense paper: No (0), Sí (1).</p></li>
<li><p><strong>PaymentMethod:</strong> Indica com el client paga la seva factura: transferència bancària - automàtica (0), targeta de crèdit - automàtica (1), xec electrònic (2), xec per correu (3).</p></li>
<li><p><strong>MonthlyCharges:</strong> Indica el total de la quota mensual actual del client per a tots els seus serveis de l’empresa.</p></li>
<li><p><strong>TotalCharges:</strong> Indica el total de càrrecs del client.</p></li>
<li><p><strong>Churn:</strong> Indica si el client es talla o no: No (0), Sí (1).</p></li>
</ul>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Import data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'https://raw.githubusercontent.com/nchelaru/data-prep/refs/heads/master/telco_cleaned_renamed.csv'</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Preview data</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Gender    SeniorCitizen    Partner    Dependents Tenure    PhoneService
1 Female No SeniorCitizen    Partner No Dependents      1 No PhoneService
2   Male No SeniorCitizen No Partner No Dependents     34    PhoneService
3   Male No SeniorCitizen No Partner No Dependents      2    PhoneService
4   Male No SeniorCitizen No Partner No Dependents     45 No PhoneService
5 Female No SeniorCitizen No Partner No Dependents      2    PhoneService
6 Female No SeniorCitizen No Partner No Dependents      8    PhoneService
     MultipleLines InternetService    OnlineSecurity    OnlineBackup
1 No MultipleLines             DSL No OnlineSecurity    OnlineBackup
2 No MultipleLines             DSL    OnlineSecurity No OnlineBackup
3 No MultipleLines             DSL    OnlineSecurity    OnlineBackup
4 No MultipleLines             DSL    OnlineSecurity No OnlineBackup
5 No MultipleLines     Fiber optic No OnlineSecurity No OnlineBackup
6    MultipleLines     Fiber optic No OnlineSecurity No OnlineBackup
     DeviceProtection    TechSupport    StreamingTV    StreamingMovies
1 No DeviceProtection No TechSupport No StreamingTV No StreamingMovies
2    DeviceProtection No TechSupport No StreamingTV No StreamingMovies
3 No DeviceProtection No TechSupport No StreamingTV No StreamingMovies
4    DeviceProtection    TechSupport No StreamingTV No StreamingMovies
5 No DeviceProtection No TechSupport No StreamingTV No StreamingMovies
6    DeviceProtection No TechSupport    StreamingTV    StreamingMovies
        Contract    PaperlessBilling             PaymentMethod MonthlyCharges
1 Month-to-month    PaperlessBilling          Electronic check          29.85
2       One year No PaperlessBilling              Mailed check          56.95
3 Month-to-month    PaperlessBilling              Mailed check          53.85
4       One year No PaperlessBilling Bank transfer (automatic)          42.30
5 Month-to-month    PaperlessBilling          Electronic check          70.70
6 Month-to-month    PaperlessBilling          Electronic check          99.65
  TotalCharges    Churn
1        29.85 No Churn
2      1889.50 No Churn
3       108.15    Churn
4      1840.75 No Churn
5       151.65    Churn
6       820.50    Churn</code></pre>
</div>
</div>
<p>Visualizamos la estructura de los datos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   7032 obs. of  20 variables:
 $ Gender          : chr  "Female" "Male" "Male" "Male" ...
 $ SeniorCitizen   : chr  "No SeniorCitizen" "No SeniorCitizen" "No SeniorCitizen" "No SeniorCitizen" ...
 $ Partner         : chr  "Partner" "No Partner" "No Partner" "No Partner" ...
 $ Dependents      : chr  "No Dependents" "No Dependents" "No Dependents" "No Dependents" ...
 $ Tenure          : int  1 34 2 45 2 8 22 10 28 62 ...
 $ PhoneService    : chr  "No PhoneService" "PhoneService" "PhoneService" "No PhoneService" ...
 $ MultipleLines   : chr  "No MultipleLines" "No MultipleLines" "No MultipleLines" "No MultipleLines" ...
 $ InternetService : chr  "DSL" "DSL" "DSL" "DSL" ...
 $ OnlineSecurity  : chr  "No OnlineSecurity" "OnlineSecurity" "OnlineSecurity" "OnlineSecurity" ...
 $ OnlineBackup    : chr  "OnlineBackup" "No OnlineBackup" "OnlineBackup" "No OnlineBackup" ...
 $ DeviceProtection: chr  "No DeviceProtection" "DeviceProtection" "No DeviceProtection" "DeviceProtection" ...
 $ TechSupport     : chr  "No TechSupport" "No TechSupport" "No TechSupport" "TechSupport" ...
 $ StreamingTV     : chr  "No StreamingTV" "No StreamingTV" "No StreamingTV" "No StreamingTV" ...
 $ StreamingMovies : chr  "No StreamingMovies" "No StreamingMovies" "No StreamingMovies" "No StreamingMovies" ...
 $ Contract        : chr  "Month-to-month" "One year" "Month-to-month" "One year" ...
 $ PaperlessBilling: chr  "PaperlessBilling" "No PaperlessBilling" "PaperlessBilling" "No PaperlessBilling" ...
 $ PaymentMethod   : chr  "Electronic check" "Mailed check" "Mailed check" "Bank transfer (automatic)" ...
 $ MonthlyCharges  : num  29.9 57 53.9 42.3 70.7 ...
 $ TotalCharges    : num  29.9 1889.5 108.2 1840.8 151.7 ...
 $ Churn           : chr  "No Churn" "No Churn" "Churn" "No Churn" ...</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pydf <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/nchelaru/data-prep/refs/heads/master/telco_cleaned_renamed.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visualizamos la estructura de los datos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>pydf.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 7032 entries, 0 to 7031
Data columns (total 20 columns):
 #   Column            Non-Null Count  Dtype  
---  ------            --------------  -----  
 0   Gender            7032 non-null   object 
 1   SeniorCitizen     7032 non-null   object 
 2   Partner           7032 non-null   object 
 3   Dependents        7032 non-null   object 
 4   Tenure            7032 non-null   int64  
 5   PhoneService      7032 non-null   object 
 6   MultipleLines     7032 non-null   object 
 7   InternetService   7032 non-null   object 
 8   OnlineSecurity    7032 non-null   object 
 9   OnlineBackup      7032 non-null   object 
 10  DeviceProtection  7032 non-null   object 
 11  TechSupport       7032 non-null   object 
 12  StreamingTV       7032 non-null   object 
 13  StreamingMovies   7032 non-null   object 
 14  Contract          7032 non-null   object 
 15  PaperlessBilling  7032 non-null   object 
 16  PaymentMethod     7032 non-null   object 
 17  MonthlyCharges    7032 non-null   float64
 18  TotalCharges      7032 non-null   float64
 19  Churn             7032 non-null   object 
dtypes: float64(2), int64(1), object(17)
memory usage: 1.1+ MB</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Los datos contienen 20 columnas divididas en: - <strong>Numéricas</strong>: <code>Tenure</code>, <code>MonthlyCharges</code> y <code>TotalCharges</code> - <strong>Categóricas</strong>: <code>Gender</code>, <code>SeniorCitizen</code>, <code>Partner</code>, <code>Dependents</code>, <code>PhoneService</code>, <code>MultipleLines</code>, <code>InternetService</code>, <code>OnlineSecurity</code>, <code>OnlineBackup</code>, <code>DeviceProtection</code>, <code>TechSupport</code>, <code>StreamingTV</code>, <code>StreamingMovies</code>, <code>Contract</code>, <code>PaperlessBilling</code>, <code>PaymentMethod</code> y <code>Churn</code> (variable respuesta)</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Consejo">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Consejo
</div>
</div>
<div class="callout-body-container callout-body">
<p>El objetivo de este estudio es poder estudiar las relaciones y asociaciones que existen en los clientes de la empresa Telecom.</p>
</div>
</div>
<section id="entrenamiento" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="entrenamiento"><span class="header-section-number">2.1</span> Entrenamiento</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>La función <code>FAMD()</code> del paquete <code>FactoMineR</code>se puede utilizar para calcular los planos factoriales. La descripción de la función es la siguiente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">FAMD</span> (base, <span class="at">ncp =</span> <span class="dv">5</span>, <span class="at">sup.var =</span> <span class="cn">NULL</span>, <span class="at">ind.sup =</span> <span class="cn">NULL</span>, <span class="at">graph =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><code>base</code>: Un <code>data.frame</code> con n filas (individuos) y p columnas (variables).</p></li>
<li><p><code>ncp</code>: El número de dimensiones que se mantienen en los resultados <em>(por defecto 5)</em></p></li>
<li><p><code>sup.var</code>: Un vector que indica los índices de las variables suplementarias.</p></li>
<li><p><code>ind.sup</code>: Un vector que indica los índices de los individuos suplementarios.</p></li>
<li><p><code>graph</code>: Un valor lógico. Si es <code>VERDADERO</code>, se muestra un gráfico.</p></li>
</ul>
<p>A continuación, vamos a calcular el FAMD de la siguiente manera:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## FAMD</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>res.famd <span class="ot">&lt;-</span> <span class="fu">FAMD</span>(df, <span class="at">sup.var =</span> <span class="dv">20</span>, <span class="at">graph =</span> <span class="cn">FALSE</span>, <span class="at">ncp =</span> <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La salida que obtenemos con la función <code>FAMD()</code> es una lista que incluye:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(res.famd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>*The results are available in the following objects:

  name          description                             
1 "$eig"        "eigenvalues and inertia"               
2 "$var"        "Results for the variables"             
3 "$ind"        "results for the individuals"           
4 "$quali.var"  "Results for the qualitative variables" 
5 "$quanti.var" "Results for the quantitative variables"</code></pre>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p>La función <code>prince.FAMD()</code> del paquete <code>prince</code>se puede utilizar para calcular los planos factoriales. La descripción de la función es la siguiente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>famd <span class="op">=</span> prince.FAMD(n_components <span class="op">=</span> <span class="dv">2</span>, n_iter <span class="op">=</span> <span class="dv">3</span>, copy <span class="op">=</span> <span class="va">True</span>, check_input <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    random_state <span class="op">=</span> <span class="dv">42</span>, engine <span class="op">=</span> <span class="st">"sklearn"</span>, handle_unknown <span class="op">=</span> <span class="st">"error"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><code>n_components</code>: El número de dimensiones que se mantienen en los resultados <em>(por defecto 2)</em></p></li>
<li><p><code>n_iter</code>: El número de iteraciones de las cuales ha de realizar el FAMD <em>(por defecto 3)</em></p></li>
<li><p><code>copy</code>: Indica si queremos realizar una copia o por el contrario de la base de datos</p></li>
<li><p><code>check_input</code>: Valida las variables de entrada</p></li>
<li><p><code>random_state</code>: Asigna una semilla para los cálculos</p></li>
</ul>
<p>A continuación, vamos a calcular el FAMD de la siguiente manera:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>famd <span class="op">=</span> prince.FAMD(n_components<span class="op">=</span><span class="dv">10</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>famdPy <span class="op">=</span> famd.fit(pydf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="visualización-e-interpretación" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="visualización-e-interpretación"><span class="header-section-number">2.2</span> Visualización e interpretación</h2>
<p>Utilizaremos las siguientes funciones del paquete <code>factoextra</code> para poder obtener las interpretaciones correspondientes:</p>
<ul>
<li><p><code>get_eigenvalue(res.famd)</code>: Extraer los valores propios/varianzas retenidas por cada dimensión (eje).</p></li>
<li><p><code>fviz_eig(res.famd)</code>: Visualizar los valores propios/varianzas.</p></li>
<li><p><code>get_famd_ind(res.famd)</code>: Extraer los resultados para individuos.</p></li>
<li><p><code>get_famd_var(res.famd)</code>: Extraer los resultados de las variables cuantitativas y cualitativas.</p></li>
<li><p><code>fviz_famd_ind(res.famd)</code> y <code>fviz_famd_var(res.famd)</code>: Visualizar los resultados para individuos y variables, respectivamente.</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled" title="Aviso">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Aviso
</div>
</div>
<div class="callout-body-container callout-body">
<p>Recordad que, para la interpretación de FAMD se ha de realizar lo mismo hecho en clases anteriores en métodos como el ACP, ACS y ACM.</p>
</div>
</div>
</section>
<section id="eigenvalues-y-eigenvectors" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="eigenvalues-y-eigenvectors"><span class="header-section-number">2.3</span> Eigenvalues y Eigenvectors</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>La proporción de varianzas retenidas (<em>eigenvalues</em>) por las diferentes dimensiones (ejes) se puede extraer utilizando la función <code>get_eigenvalue()</code> del paquete <code>factoextra</code> de la siguiente manera:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>eig.val <span class="ot">&lt;-</span> <span class="fu">get_eigenvalue</span>(res.famd)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(eig.val)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      eigenvalue variance.percent cumulative.variance.percent
Dim.1   5.257621        22.859222                    22.85922
Dim.2   2.855902        12.416963                    35.27619
Dim.3   1.860948         8.091076                    43.36726
Dim.4   1.164287         5.062115                    48.42938
Dim.5   1.049924         4.564885                    52.99426
Dim.6   1.015145         4.413675                    57.40794</code></pre>
</div>
</div>
<p>La función <code>fviz_eig()</code> o <code>fviz_screeplot()</code> del paquete <code>factoextra</code> se puede utilizar para dibujar el diagrama de codo (los porcentajes de inercia explicados por cada dimensión de FAMD):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_screeplot</span>(res.famd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/screePlot-R-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<p>La proporción de varianzas retenidas (<em>eigenvalues</em>) por las diferentes dimensiones (ejes) se puede extraer utilizando el método <code>.eigenvalues_</code> de la siguiente manera:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>eigenvalues <span class="op">=</span> famd.eigenvalues_</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>famd.eigenvalues_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          eigenvalue % of variance % of variance (cumulative)
component                                                    
0             36.181         4.36%                      4.36%
1             26.517         3.19%                      7.55%
2             16.198         1.95%                      9.51%
3             11.046         1.33%                     10.84%
4             10.134         1.22%                     12.06%
5              9.378         1.13%                     13.19%
6              9.195         1.11%                     14.30%
7              9.107         1.10%                     15.39%
8              9.077         1.09%                     16.49%
9              9.066         1.09%                     17.58%</code></pre>
</div>
</div>
<p>La función <code>fviz_eig()</code> o <code>fviz_screeplot()</code> del paquete <code>factoextra</code> se puede utilizar para dibujar el diagrama de codo (los porcentajes de inercia explicados por cada dimensión de FAMD):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Hacer el scree plot</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>plt.plot(<span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(eigenvalues) <span class="op">+</span> <span class="dv">1</span>), eigenvalues, marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Scree Plot - FAMD'</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Componentes'</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Valor propio (Eigenvalue)'</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>plt.xticks(<span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(eigenvalues) <span class="op">+</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>([&lt;matplotlib.axis.XTick object at 0x0000019752FF2F90&gt;, &lt;matplotlib.axis.XTick object at 0x0000019752FF2AE0&gt;, &lt;matplotlib.axis.XTick object at 0x0000019752FF0830&gt;, &lt;matplotlib.axis.XTick object at 0x000001973987F770&gt;, &lt;matplotlib.axis.XTick object at 0x0000019752F96FC0&gt;, &lt;matplotlib.axis.XTick object at 0x0000019752F94830&gt;, &lt;matplotlib.axis.XTick object at 0x0000019752F94110&gt;, &lt;matplotlib.axis.XTick object at 0x0000019752F95160&gt;, &lt;matplotlib.axis.XTick object at 0x0000019752F21E20&gt;, &lt;matplotlib.axis.XTick object at 0x0000019752F23C20&gt;], [Text(1, 0, '1'), Text(2, 0, '2'), Text(3, 0, '3'), Text(4, 0, '4'), Text(5, 0, '5'), Text(6, 0, '6'), Text(7, 0, '7'), Text(8, 0, '8'), Text(9, 0, '9'), Text(10, 0, '10')])</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/screePlot-python-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="variables" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="variables"><span class="header-section-number">2.4</span> Variables</h2>
<section id="todas-las-variables" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="todas-las-variables"><span class="header-section-number">2.4.1</span> Todas las variables</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<p>La función <code>get_mfa_var()</code> del paquete <code>factoextra</code> se utiliza para extraer los resultados de las variables. Por defecto, esta función devuelve una lista con las coordenadas, el coseno<span class="math inline">\(^2\)</span> y la contribución de todas las variables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(var <span class="ot">&lt;-</span> <span class="fu">get_famd_var</span>(res.famd))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>FAMD results for variables 
 ===================================================
  Name       Description                      
1 "$coord"   "Coordinates"                    
2 "$cos2"    "Cos2, quality of representation"
3 "$contrib" "Contributions"                  </code></pre>
</div>
</div>
<section id="coordenadas-de-las-componentes" class="level4" data-number="2.4.1.1">
<h4 data-number="2.4.1.1" class="anchored" data-anchor-id="coordenadas-de-las-componentes"><span class="header-section-number">2.4.1.1</span> Coordenadas de las componentes</h4>
<p>Se puede acceder a los diferentes componentes de la siguiente manera:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(var<span class="sc">$</span>coord)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      Dim.1        Dim.2        Dim.3        Dim.4        Dim.5
Tenure         0.4206809111 0.2864370404 5.868863e-02 0.0218736221 0.0457414192
MonthlyCharges 0.7115470075 0.2017404911 2.527110e-03 0.0009313836 0.0373283234
TotalCharges   0.7986771845 0.0407946811 2.999847e-02 0.0137505310 0.0002819435
Gender         0.0001947487 0.0001642962 3.424638e-06 0.0015453361 0.0004039431
SeniorCitizen  0.0304048842 0.1378319021 5.802770e-03 0.0057238890 0.3353323926
Partner        0.0969690101 0.1609366512 6.777893e-02 0.3774002728 0.0210933977
                      Dim.6        Dim.7        Dim.8        Dim.9       Dim.10
Tenure         0.0029714256 0.0027429293 7.207226e-04 0.0019253192 0.0001662265
MonthlyCharges 0.0017659924 0.0016048597 2.060097e-03 0.0024653067 0.0006742955
TotalCharges   0.0006692374 0.0007429025 1.192828e-06 0.0000503063 0.0014968379
Gender         0.5699953144 0.0066959594 4.067682e-01 0.0099656888 0.0033994054
SeniorCitizen  0.0176392989 0.0220825549 1.815717e-02 0.0329897921 0.2538389658
Partner        0.0001656422 0.0011872334 4.440980e-03 0.0122687338 0.0216571075
                     Dim.11       Dim.12       Dim.13       Dim.14       Dim.15
Tenure         4.981054e-03 0.0267256698 1.850589e-02 1.850273e-05 0.0034256618
MonthlyCharges 3.863952e-03 0.0039277693 6.322752e-03 1.485444e-06 0.0017050717
TotalCharges   3.368100e-03 0.0089892406 1.274734e-03 2.784590e-04 0.0038733938
Gender         9.755036e-07 0.0002331641 3.296441e-05 1.558037e-05 0.0001994270
SeniorCitizen  5.217503e-03 0.0779633402 3.633753e-03 1.591970e-02 0.0004404344
Partner        2.754490e-06 0.0078130672 3.866355e-05 1.698396e-04 0.0001266777
                     Dim.16       Dim.17       Dim.18       Dim.19       Dim.20
Tenure         4.670909e-04 2.284007e-03 1.469844e-03 4.847367e-05 0.0478358122
MonthlyCharges 4.227004e-04 3.543009e-03 1.582231e-03 1.445384e-04 0.0045808492
TotalCharges   4.619748e-06 5.613798e-03 2.565614e-03 1.539323e-04 0.0290454761
Gender         1.059940e-04 7.070834e-07 5.598966e-05 2.985598e-07 0.0002082851
SeniorCitizen  6.968803e-05 2.874512e-02 5.093689e-03 2.982280e-03 0.0001185972
Partner        1.363573e-03 8.667739e-02 8.881079e-02 4.534216e-02 0.0043867745
                     Dim.21       Dim.22       Dim.23
Tenure         3.107601e-02 2.121374e-02 3.356178e-09
MonthlyCharges 1.007993e-02 6.933745e-04 4.874746e-04
TotalCharges   2.527184e-02 3.309750e-02 8.054459e-09
Gender         1.002096e-05 2.509762e-07 7.642205e-11
SeniorCitizen  1.026425e-05 2.015929e-06 5.707411e-12
Partner        1.362083e-03 8.266294e-06 2.637956e-10</code></pre>
</div>
</div>
</section>
<section id="coseno2" class="level4" data-number="2.4.1.2">
<h4 data-number="2.4.1.2" class="anchored" data-anchor-id="coseno2"><span class="header-section-number">2.4.1.2</span> Coseno<span class="math inline">\(^2\)</span></h4>
<p>A continuación se muestra el coseno<span class="math inline">\(^2\)</span> que representa la calidad de la representación en el mapa factorial.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(var<span class="sc">$</span>cos2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      Dim.1        Dim.2        Dim.3        Dim.4        Dim.5
Tenure         1.769724e-01 8.204618e-02 3.444355e-03 4.784553e-04 2.092277e-03
MonthlyCharges 5.062991e-01 4.069923e-02 6.386284e-06 8.674754e-07 1.393404e-03
TotalCharges   6.378852e-01 1.664206e-03 8.999080e-04 1.890771e-04 7.949213e-08
Gender         3.792705e-08 2.699325e-08 1.172814e-11 2.388064e-06 1.631700e-07
SeniorCitizen  9.244570e-04 1.899763e-02 3.367214e-05 3.276290e-05 1.124478e-01
Partner        9.402989e-03 2.590061e-02 4.593984e-03 1.424310e-01 4.449314e-04
                      Dim.6        Dim.7        Dim.8        Dim.9       Dim.10
Tenure         8.829370e-06 7.523661e-06 5.194411e-07 3.706854e-06 2.763125e-08
MonthlyCharges 3.118729e-06 2.575575e-06 4.243998e-06 6.077737e-06 4.546744e-07
TotalCharges   4.478787e-07 5.519042e-07 1.422838e-12 2.530724e-09 2.240524e-06
Gender         3.248947e-01 4.483587e-05 1.654604e-01 9.931495e-05 1.155596e-05
SeniorCitizen  3.111449e-04 4.876392e-04 3.296827e-04 1.088326e-03 6.443422e-02
Partner        2.743734e-08 1.409523e-06 1.972231e-05 1.505218e-04 4.690303e-04
                     Dim.11       Dim.12       Dim.13       Dim.14       Dim.15
Tenure         2.481089e-05 7.142614e-04 3.424680e-04 3.423510e-10 1.173516e-05
MonthlyCharges 1.493012e-05 1.542737e-05 3.997719e-05 2.206542e-12 2.907269e-06
TotalCharges   1.134410e-05 8.080645e-05 1.624948e-06 7.753942e-08 1.500318e-05
Gender         9.516073e-13 5.436552e-08 1.086652e-09 2.427479e-10 3.977112e-08
SeniorCitizen  2.722234e-05 6.078282e-03 1.320416e-05 2.534368e-04 1.939825e-07
Partner        7.587217e-12 6.104402e-05 1.494870e-09 2.884550e-08 1.604723e-08
                     Dim.16       Dim.17       Dim.18       Dim.19       Dim.20
Tenure         2.181739e-07 5.216686e-06 2.160443e-06 2.349697e-09 2.288265e-03
MonthlyCharges 1.786756e-07 1.255291e-05 2.503454e-06 2.089135e-08 2.098418e-05
TotalCharges   2.134207e-11 3.151473e-05 6.582377e-06 2.369514e-08 8.436397e-04
Gender         1.123473e-08 4.999670e-13 3.134842e-09 8.913794e-14 4.338268e-08
SeniorCitizen  4.856421e-09 8.262820e-04 2.594567e-05 8.893993e-06 1.406531e-08
Partner        1.859330e-06 7.512970e-03 7.887356e-03 2.055911e-03 1.924379e-05
                     Dim.21       Dim.22       Dim.23
Tenure         9.657182e-04 4.500228e-04 1.126393e-17
MonthlyCharges 1.016049e-04 4.807682e-07 2.376315e-07
TotalCharges   6.386660e-04 1.095444e-03 6.487430e-17
Gender         1.004197e-10 6.298905e-14 5.840329e-21
SeniorCitizen  1.053548e-10 4.063970e-12 3.257454e-23
Partner        1.855271e-06 6.833162e-11 6.958814e-20</code></pre>
</div>
</div>
</section>
<section id="contribuciones" class="level4" data-number="2.4.1.3">
<h4 data-number="2.4.1.3" class="anchored" data-anchor-id="contribuciones"><span class="header-section-number">2.4.1.3</span> Contribuciones</h4>
<p>En el siguiente apartado, podemos visualizar la contribución de cada una de las varaibles a las dimensiones.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(var<span class="sc">$</span>contrib)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      Dim.1        Dim.2        Dim.3       Dim.4       Dim.5
Tenure          8.001354821 10.029653733 3.1536958900  1.87871471  4.35664277
MonthlyCharges 13.533630663  7.063986094 0.1357969462  0.07999608  3.55533722
TotalCharges   15.190847437  1.428434412 1.6119995933  1.18102638  0.02685371
Gender          0.003704122  0.005752867 0.0001840266  0.13272816  0.03847357
SeniorCitizen   0.578301180  4.826213291 0.3118180199  0.49162203 31.93874325
Partner         1.844351468  5.635230981 3.6421732973 32.41472495  2.00904126
                     Dim.6      Dim.7        Dim.8       Dim.9      Dim.10
Tenure          0.29270941 0.27422854 7.322369e-02 0.212969557  0.01960159
MonthlyCharges  0.17396451 0.16044829 2.093009e-01 0.272700375  0.07951358
TotalCharges    0.06592529 0.07427281 1.211885e-04 0.005564641  0.17650859
Gender         56.14913986 0.66943876 4.132667e+01 1.102356579  0.40086121
SeniorCitizen   1.73761333 2.20773710 1.844725e+00 3.649172179 29.93293914
Partner         0.01631709 0.11869547 4.511929e-01 1.357108337  2.55382730
                     Dim.11      Dim.12      Dim.13       Dim.14     Dim.15
Tenure         0.6499287792  3.73205584 2.737664890 0.0029757420 0.55800709
MonthlyCharges 0.5041691151  0.54848595 0.935354831 0.0002388997 0.27773965
TotalCharges   0.4394703000  1.25528558 0.188577535 0.0447837802 0.63093830
Gender         0.0001272839  0.03255977 0.004876582 0.0025057471 0.03248472
SeniorCitizen  0.6807807661 10.88704387 0.537558363 2.5603202217 0.07174250
Partner        0.0003594064  1.09104106 0.005719683 0.0273148289 0.02063457
                     Dim.16       Dim.17      Dim.18       Dim.19      Dim.20
Tenure         0.0782042308 4.732908e-01  0.31395346 1.046222e-02 14.71421048
MonthlyCharges 0.0707720112 7.341808e-01  0.33795875 3.119615e-02  1.40906104
TotalCharges   0.0007734766 1.163289e+00  0.54800596 3.322366e-02  8.93433661
Gender         0.0177463952 1.465215e-04  0.01195919 6.443904e-05  0.06406812
SeniorCitizen  0.0116677487 5.956551e+00  1.08799356 6.436743e-01  0.03648030
Partner        0.2283006539 1.796125e+01 18.96966271 9.786333e+00  1.34936400
                     Dim.21       Dim.22       Dim.23
Tenure         11.474106762 36.961897749 4.472128e-04
MonthlyCharges  3.721783141  1.208105574 6.495628e+01
TotalCharges    9.331051522 57.667637189 1.073261e-03
Gender          0.003700011  0.000437290 1.018328e-05
SeniorCitizen   0.003789839  0.003512467 7.605160e-07
Partner         0.502918193  0.014402831 3.515093e-05</code></pre>
</div>
</div>
<p>La siguiente figura muestra la correlación entre las variables, tanto cuantitativas como cualitativas, y las dimensiones principales, así como la contribución de las variables a las dimensiones 1 y 2. Se utilizan las siguientes funciones del paquete <code>factoextra</code>:</p>
<ul>
<li><p><code>fviz_famd_var()</code>: para representar gráficamente variables cuantitativas y cualitativas</p></li>
<li><p><code>fviz_contrib()</code>: para visualizar la contribución de las variables a las dimensiones principales</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_famd_var</span>(res.famd, <span class="at">repel =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/graficoVariables-R-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>A continuación vamos a visualizar las contribuciones de las variables en la primera dimensión.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Contribution to the first dimension</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_contrib</span>(res.famd, <span class="st">"var"</span>, <span class="at">axes =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/contribuciones1aDim-R-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Seguidamente podemos ver las contribuciones de las variables en la 2a dimensión.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Contribution to the second dimension</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_contrib</span>(res.famd, <span class="st">"var"</span>, <span class="at">axes =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/contribuciones2aDim-R-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>La línea discontinua roja en el gráfico anterior indica el valor promedio esperado, si las contribuciones fueran uniformes.</p>
<p>De los gráficos anteriormente expuestos se puede observar que:</p>
<ul>
<li><p>Las variables más contribuyentes a la primera dimensión són:</p>
<ul>
<li>…</li>
</ul></li>
<li><p>Las variables que más contribuyen a la segunda dimensión son:</p>
<ul>
<li>…</li>
</ul></li>
</ul>
</section>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<section id="coordenadas-de-las-componentes-1" class="level4" data-number="2.4.1.4">
<h4 data-number="2.4.1.4" class="anchored" data-anchor-id="coordenadas-de-las-componentes-1"><span class="header-section-number">2.4.1.4</span> Coordenadas de las componentes</h4>
<p>Se puede acceder a los diferentes componentes de la siguiente manera:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">## famd.row_coordinates(pydf)  ## Individuos</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>famd.column_coordinates_</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>component                0         1  ...         8             9
variable                              ...                        
MonthlyCharges    0.516084  0.326985  ...  0.000024  2.719971e-04
TotalCharges      0.758263  0.001235  ...  0.001354  1.399417e-06
Churn             0.031624  0.389555  ...  0.001300  1.998385e-03
Contract          0.204277  0.430340  ...  0.003679  9.335352e-04
Dependents        0.014209  0.206706  ...  0.000808  1.045339e-06
DeviceProtection  0.426754  0.002936  ...  0.006802  1.348613e-07
Gender            0.000248  0.000380  ...  0.006765  7.022369e-03
InternetService   0.292035  0.506334  ...  0.005546  1.554956e-03
MultipleLines     0.206875  0.054604  ...  0.002214  4.321594e-04
OnlineBackup      0.349894  0.002057  ...  0.001307  1.451828e-03
OnlineSecurity    0.272749  0.039203  ...  0.010315  1.100983e-03
PaperlessBilling  0.051292  0.241663  ...  0.001531  2.319590e-02
Partner           0.143598  0.096932  ...  0.000460  7.417890e-04
PaymentMethod     0.204439  0.381225  ...  0.020124  1.076496e-03
PhoneService      0.001444  0.012175  ...  0.000041  1.245809e-05
SeniorCitizen     0.012635  0.167889  ...  0.000537  4.012970e-03
StreamingMovies   0.406131  0.088201  ...  0.000606  3.132390e-05
StreamingTV       0.399842  0.090072  ...  0.003217  1.702668e-03
TechSupport       0.335530  0.027956  ...  0.000144  5.169755e-06
Tenure            0.525252  0.173087  ...  0.945035  9.635537e-01

[20 rows x 10 columns]</code></pre>
</div>
</div>
</section>
<section id="coseno2-1" class="level4" data-number="2.4.1.5">
<h4 data-number="2.4.1.5" class="anchored" data-anchor-id="coseno2-1"><span class="header-section-number">2.4.1.5</span> Coseno<span class="math inline">\(^2\)</span></h4>
<p>A continuación se muestra el coseno<span class="math inline">\(^2\)</span> que representa la calidad de la representación en el mapa factorial.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>famd.column_cosine_similarities_</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;bound method FAMD.column_cosine_similarities_ of FAMD(n_components=10, random_state=42)&gt;</code></pre>
</div>
</div>
</section>
<section id="contribuciones-1" class="level4" data-number="2.4.1.6">
<h4 data-number="2.4.1.6" class="anchored" data-anchor-id="contribuciones-1"><span class="header-section-number">2.4.1.6</span> Contribuciones</h4>
<p>En el siguiente apartado, podemos visualizar la contribución de cada una de las varaibles a las dimensiones.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>(famd.column_contributions_)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>component                0         1  ...         8             9
variable                              ...                        
MonthlyCharges    0.014264  0.012331  ...  0.000003  3.000298e-05
TotalCharges      0.020957  0.000047  ...  0.000149  1.543644e-07
Churn             0.000874  0.014691  ...  0.000143  2.204343e-04
Contract          0.005646  0.016229  ...  0.000405  1.029748e-04
Dependents        0.000393  0.007795  ...  0.000089  1.153075e-07
DeviceProtection  0.011795  0.000111  ...  0.000749  1.487605e-08
Gender            0.000007  0.000014  ...  0.000745  7.746111e-04
InternetService   0.008071  0.019095  ...  0.000611  1.715214e-04
MultipleLines     0.005718  0.002059  ...  0.000244  4.766988e-05
OnlineBackup      0.009671  0.000078  ...  0.000144  1.601457e-04
OnlineSecurity    0.007538  0.001478  ...  0.001136  1.214453e-04
PaperlessBilling  0.001418  0.009114  ...  0.000169  2.558652e-03
Partner           0.003969  0.003655  ...  0.000051  8.182395e-05
PaymentMethod     0.005650  0.014377  ...  0.002217  1.187443e-04
PhoneService      0.000040  0.000459  ...  0.000004  1.374205e-06
SeniorCitizen     0.000349  0.006331  ...  0.000059  4.426556e-04
StreamingMovies   0.011225  0.003326  ...  0.000067  3.455221e-06
StreamingTV       0.011051  0.003397  ...  0.000354  1.878148e-04
TechSupport       0.009274  0.001054  ...  0.000016  5.702562e-07
Tenure            0.014517  0.006527  ...  0.104116  1.062860e-01

[20 rows x 10 columns]</code></pre>
</div>
</div>
<p>La siguiente figura muestra la correlación entre las variables, tanto cuantitativas como cualitativas, y las dimensiones principales, así como la contribución de las variables a las dimensiones 1 y 2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Coordenadas de las variables (componentes 1 y 2)</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>coords <span class="op">=</span> famd.column_coordinates_</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Elegimos los dos primeros componentes</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> coords[<span class="dv">0</span>]</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> coords[<span class="dv">1</span>]</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>plt.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, lw<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>plt.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, lw<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Dibujar solo puntos con etiquetas</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>plt.scatter(x, y, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(coords)):</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    plt.text(x[i], y[i], coords.index[i], fontsize<span class="op">=</span><span class="dv">9</span>, color<span class="op">=</span><span class="st">"red"</span> , ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'center'</span>)</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Variables en el plano factorial (FAMD)"</span>)</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Dim 1"</span>)</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Dim 2"</span>)</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'equal'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(-0.0379131486918263, 0.7961761225283522, -0.025316678052831384, 0.531650239109459)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/graficoVariables-py-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
<p>A continuación vamos a visualizar las contribuciones de las variables en la primera dimensión.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtener coordenadas de las variables</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>coords <span class="op">=</span> famd.column_coordinates_</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular la contribución (cos²) al eje 1</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Es la coordenada al cuadrado de cada variable en ese eje</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>contrib <span class="op">=</span> (coords[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Normalizar en porcentaje</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>contrib_percent <span class="op">=</span> <span class="dv">100</span> <span class="op">*</span> contrib <span class="op">/</span> contrib.<span class="bu">sum</span>()</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenar de mayor a menor</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>contrib_percent <span class="op">=</span> contrib_percent.sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular la media</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>mean_contrib <span class="op">=</span> <span class="dv">100</span> <span class="op">/</span> <span class="bu">len</span>(contrib_percent)</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficar</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span>contrib_percent.values, y<span class="op">=</span>contrib_percent.index, palette<span class="op">=</span><span class="st">"Blues_d"</span>)</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>plt.axvline(mean_contrib, color<span class="op">=</span><span class="st">'red'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, label<span class="op">=</span><span class="ss">f'Media = </span><span class="sc">{</span>mean_contrib<span class="sc">:.2f}</span><span class="ss">%'</span>)</span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Contribución al componente 1 (%)'</span>)</span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Contribución de variables al eje 1 (FAMD)'</span>)</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/contribuciones1aDim-py-3.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>Seguidamente podemos ver las contribuciones de las variables en la 2a dimensión.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtener coordenadas de las variables</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>coords <span class="op">=</span> famd.column_coordinates_</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular la contribución (cos²) al eje 1</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Es la coordenada al cuadrado de cada variable en ese eje</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>contrib <span class="op">=</span> (coords[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Normalizar en porcentaje</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>contrib_percent <span class="op">=</span> <span class="dv">100</span> <span class="op">*</span> contrib <span class="op">/</span> contrib.<span class="bu">sum</span>()</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenar de mayor a menor</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>contrib_percent <span class="op">=</span> contrib_percent.sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular la media</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>mean_contrib <span class="op">=</span> <span class="dv">100</span> <span class="op">/</span> <span class="bu">len</span>(contrib_percent)</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficar</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span>contrib_percent.values, y<span class="op">=</span>contrib_percent.index, palette<span class="op">=</span><span class="st">"Blues_d"</span>)</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>plt.axvline(mean_contrib, color<span class="op">=</span><span class="st">'red'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, label<span class="op">=</span><span class="ss">f'Media = </span><span class="sc">{</span>mean_contrib<span class="sc">:.2f}</span><span class="ss">%'</span>)</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Contribución al componente 2 (%)'</span>)</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Contribución de variables al eje 2 (FAMD)'</span>)</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/contribuciones2aDim-py-5.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>La línea discontinua roja en el gráfico anterior indica el valor promedio esperado, si las contribuciones fueran uniformes.</p>
<p>De los gráficos anteriormente expuestos se puede observar que:</p>
<ul>
<li><p>Las variables más contribuyentes a la primera dimensión són:</p>
<ul>
<li>…</li>
</ul></li>
<li><p>Las variables que más contribuyen a la segunda dimensión son:</p>
<ul>
<li>…</li>
</ul></li>
</ul>
</section>
</div>
</div>
</div>
</section>
<section id="variables-cuantitativas" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="variables-cuantitativas"><span class="header-section-number">2.4.2</span> Variables cuantitativas</h3>
<p>Para extraer los resultados de las variables cuantitativas, se debe realizar el siguiente proceso:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>(quanti.var <span class="ot">&lt;-</span> <span class="fu">get_famd_var</span>(res.famd, <span class="st">"quanti.var"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>FAMD results for quantitative variables 
 ===================================================
  Name       Description                      
1 "$coord"   "Coordinates"                    
2 "$cos2"    "Cos2, quality of representation"
3 "$contrib" "Contributions"                  </code></pre>
</div>
</div>
<p>A continuación vamos a visualizar el círculo unitario tal y como extraiamos de la aplicación del <strong>ACP</strong>. Para no superponer las etiquetas de las variables numéricas, vamos a utilizar el parámetro <code>repel = TRUE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_famd_var</span>(res.famd, <span class="st">"quanti.var"</span>, <span class="at">repel =</span> <span class="cn">TRUE</span>,</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">col.var =</span> <span class="st">"black"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/circuloUnitario-R-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>El gráfico de variables (círculo unitario) muestra la relación entre las variables, la calidad de su representación, así como la correlación entre las variables y las dimensiones.</p>
<p>Las variables cuantitativas más contribuyentes se pueden resaltar en el diagrama de dispersión mediante el argumento <code>col.var = "contrib"</code>. Esto produce un degradado de colores, que se puede personalizar mediante el argumento <code>gradient.cols</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_famd_var</span>(res.famd, <span class="st">"quanti.var"</span>, <span class="at">col.var =</span> <span class="st">"contrib"</span>, <span class="at">gradient.cols =</span> <span class="fu">c</span>(<span class="st">"#00AFBB"</span>, <span class="st">"#E7B800"</span>, <span class="st">"#FC4E07"</span>), <span class="at">repel =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/circulo Unitario Contribuciones-R-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Del mismo modo, puede resaltar variables cuantitativas utilizando sus valores cos<span class="math inline">\(^2\)</span> que representan la calidad de la representación en el mapa factorial. Si una variable está bien representada por dos dimensiones, la suma del cos<span class="math inline">\(^2\)</span> se aproxima a uno. Para algunos de los elementos, es posible que se requieran más de 2 dimensiones para representar perfectamente los datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_famd_var</span>(res.famd, <span class="st">"quanti.var"</span>, <span class="at">col.var =</span> <span class="st">"cos2"</span>, <span class="at">gradient.cols =</span> <span class="fu">c</span>(<span class="st">"#00AFBB"</span>, <span class="st">"#E7B800"</span>, <span class="st">"#FC4E07"</span>), <span class="at">repel =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/circulo unitario calidad-R-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">

</div>
</div>
</div>
</section>
<section id="variables-cualitativas" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="variables-cualitativas"><span class="header-section-number">2.4.3</span> Variables cualitativas</h3>
<p>Al igual que las variables cuantitativas, los resultados de las variables cualitativas se pueden extraer de la siguiente manera:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(quali.var <span class="ot">&lt;-</span> <span class="fu">get_famd_var</span>(res.famd, <span class="st">"quali.var"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>FAMD results for qualitative variable categories 
 ===================================================
  Name       Description                      
1 "$coord"   "Coordinates"                    
2 "$cos2"    "Cos2, quality of representation"
3 "$contrib" "Contributions"                  </code></pre>
</div>
</div>
<p>Para visualizar las variables cualitativas, se ha de escribir el siguiente código:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_famd_var</span>(res.famd, <span class="st">"quali.var"</span>, <span class="at">col.var =</span> <span class="st">"contrib"</span>, <span class="at">gradient.cols =</span> <span class="fu">c</span>(<span class="st">"#00AFBB"</span>, <span class="st">"#E7B800"</span>, <span class="st">"#FC4E07"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/varsCualitativasContribucion-R-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>La gráfica anterior muestra las categorías de las variables categóricas.</p>
</section>
</section>
<section id="individuos" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="individuos"><span class="header-section-number">2.5</span> Individuos</h2>
<p>Si se desean hacer gráficos individuales se realiza lo siguiente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>(ind <span class="ot">&lt;-</span> <span class="fu">get_famd_ind</span>(res.famd))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>FAMD results for individuals 
 ===================================================
  Name       Description                      
1 "$coord"   "Coordinates"                    
2 "$cos2"    "Cos2, quality of representation"
3 "$contrib" "Contributions"                  </code></pre>
</div>
</div>
<p>Para representar gráficamente a los individuos, utilizaremos la función <code>fviz_mfa_ind()</code> del paquete <code>factoextra</code>. Por defecto, los individuos están coloreados en azul. Sin embargo, al igual que las variables, también es posible colorear a los individuos por sus valores de cos2 y contribución:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_famd_ind</span>(res.famd, <span class="at">col.ind =</span> <span class="st">"cos2"</span>, </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">gradient.cols =</span> <span class="fu">c</span>(<span class="st">"#00AFBB"</span>, <span class="st">"#E7B800"</span>, <span class="st">"#FC4E07"</span>), <span class="at">repel =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Las categorias de las variables cualitativas se muestran en negro. Para poder eliminar dichas modalidades, utilizamos el parámetro <code>invisible = "quali.var"</code>.</p>
<p>Los individuos con perfiles similares se encuentran cerca en el mapa factorial.</p>
<p>Es posible colorear a los individuos utilizando cualquiera de las variables cualitativas en la tabla de datos inicial. Para ello, se utiliza el argumento habillage en la función <code>fviz_famd_ind()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_mfa_ind</span>(res.famd, </span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">habillage =</span> <span class="st">"Churn"</span>, <span class="co"># color by groups </span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"#00AFBB"</span>, <span class="st">"#E7B800"</span>, <span class="st">"#FC4E07"</span>),</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">addEllipses =</span> <span class="cn">TRUE</span>, <span class="at">ellipse.type =</span> <span class="st">"confidence"</span>, </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">repel =</span> <span class="cn">TRUE</span> <span class="co"># Avoid text overlapping</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>             ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si lo que queremos es colorear los individuos usando múltiples variables categóricas al mismo tiempo, se deberá de utilizar la función <code>fviz_ellipses()</code> del paquete <code>factoextra</code> de la siguiente forma:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_ellipses</span>(res.famd, <span class="fu">c</span>(<span class="st">"Churn"</span>, <span class="st">"Gender"</span>), <span class="at">repel =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/multiples varCat en planoFactorial - R-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>También se puede identificar que variables categóricas queremos representar con el id de las variables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_ellipses</span>(res.famd, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">geom =</span> <span class="st">"point"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="FAMD_files/figure-html/multiples varCat en planoFactorial por id - R-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

<p>Aquesta web està creada por Dante Conti y Sergi Ramírez, (c) 2024</p></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>